\documentclass[]{article}

\usepackage{accsupp}
\newcommand*{\noaccsupp}[1]{\BeginAccSupp{ActualText={}}#1\EndAccSupp{}}

\usepackage{xcolor}

\usepackage{showexpl}


\lstdefinestyle{LaTeX}
{
    language={[LaTeX]TeX},
    alsolanguage={PSTricks},
    numbers=left,
    numbersep=1em,
    numberstyle=\tiny\color{red}\noaccsupp,
    frame=single,
    framesep=\fboxsep,
    framerule=\fboxrule,
    rulecolor=\color{red},
    xleftmargin=\dimexpr\fboxsep+\fboxrule\relax,
    xrightmargin=\dimexpr\fboxsep+\fboxrule\relax,
    breaklines=true,
    basicstyle=\small\tt,
    keywordstyle=\color{blue},
    commentstyle=\color[rgb]{0.13,0.54,0.13},
    backgroundcolor=\color{yellow!10},
    tabsize=2,
    columns=flexible,
    explpreset={},
    morekeywords={
        graphicspath,
        includegraphics,
        blinddocument,
    },
}

\lstdefinestyle{Java}
{
    language={Java},
    alsolanguage={[Sharp]C},
    numbers=left,
    numbersep=1em,
    numberstyle=\tiny\color{red}\noaccsupp,
    frame=single,
    framesep=\fboxsep,
    framerule=\fboxrule,
    rulecolor=\color{red},
    xleftmargin=\dimexpr\fboxsep+\fboxrule\relax,
    xrightmargin=\dimexpr\fboxsep+\fboxrule\relax,
    breaklines=true,
    basicstyle=\small\tt,
    keywordstyle=\color{blue},
    commentstyle=\color[rgb]{0.13,0.54,0.13},
    backgroundcolor=\color{cyan!10},
    tabsize=2,
    columns=flexible,
    morekeywords={
        Console,
        WriteLine,
        int,
    },
}


\lstnewenvironment{java}
{\lstset{style=Java}}
{}

\begin{document}


\begin{LTXexample}[style=LaTeX]
    \LaTeXe\ is not for children!
\end{LTXexample}

\begin{lstlisting}[style=LaTeX]
    \documentclass[12pt]{article}
    \usepackage{titleps}
    \usepackage{fancyhdr}
    \usepackage{graphicx}
    \usepackage{lipsum} % for dummy text
    \pagestyle{myheadings}
    \pagestyle{fancy}
    \fancyhf{}
    \setlength{\headheight}{30pt}
    \renewcommand{\headrulewidth}{4pt}
    \renewcommand{\footrulewidth}{2pt}
    \fancyhead[L]{\includegraphics[width=1cm]{example-image-a}}
    \fancyhead[C]{}
    \fancyhead[R]{\rightmark}
    \fancyfoot[L]{ABC}
    \fancyfoot[C]{\textcopyright xyz}
    \fancyfoot[R]{\thepage}
    \begin{document}
    \section{First section}
    \subsection{One}
    \lipsum[1-3]
    \subsection{Two}
    \lipsum[4-6]
    \end{document}
\end{lstlisting}

\begin{java}
    public void Main(string[] args)
    {
        Console.WriteLine("Java is not for children!");
    }
\end{java}


\end{document}